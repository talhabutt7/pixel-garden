<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pixel Garden</title>
  <style>
    :root { --fg:#111; --bg:#fafafa; }
    @media (prefers-color-scheme: dark){ :root{ --fg:#eee; --bg:#111; } }
    *{ box-sizing:border-box }
    body{ margin:0; font-family:system-ui, -apple-system, segoue ui, Roboto, Arial, sans-serif; color:var(--fg); background:var(--bg); }
    header{ padding:2rem 1rem; text-align:center; }
    h1{ margin:0 0 .25rem; font-size:2rem; letter-spacing:.02em; }
    p{ margin:.25rem 0 0; opacity:.7 }
    .grid{ display:grid; gap:12px; padding:1rem; grid-template-columns:repeat(auto-fill, minmax(180px,1fr)); }
    .card{ background:#ffffff10; border:1px solid #00000010; border-radius:16px; overflow:hidden; box-shadow:0 2px 8px #00000020; }
    .card a{ display:block; text-decoration:none }
    .card img{ width:100%; height:auto; display:block }
    .meta{ padding:.5rem .75rem; font-size:.85rem; opacity:.8 }
    footer{ text-align:center; opacity:.6; padding:2rem 1rem; font-size:.85rem }
    .pill{ display:inline-block; padding:.25rem .6rem; border-radius:999px; border:1px solid #00000022; margin-left:.5rem; font-size:.75rem; opacity:.8 }
  </style>
</head>
<body>
  <header>
    <h1>Pixel Garden <span class="pill">autoâ€‘growing</span></h1>
    <p>New generative tiles sprout every other day ðŸŒ± via GitHub Actions</p>
  </header>
  <main class="grid" id="grid" aria-live="polite"></main>
  <footer>
    Made with â™¥ and GitHub Actions. No manual updates required.
  </footer>

  <script>
    async function load(){
      const grid = document.getElementById('grid');
      try{
        const res = await fetch('manifest.json', { cache: 'no-store' });
        const manifest = await res.json();
        // newest first
        manifest.sort((a,b)=> new Date(b.date) - new Date(a.date));
        const frag = document.createDocumentFragment();
        for(const item of manifest){
          const card = document.createElement('div');
          card.className = 'card';
          const link = document.createElement('a');
          link.href = item.path;
          link.target = '_blank';
          const img = document.createElement('img');
          img.loading = 'lazy';
          img.alt = item.title || 'Tile';
          img.src = item.path;
          const meta = document.createElement('div');
          meta.className = 'meta';
          meta.textContent = `${new Date(item.date).toLocaleString()} â€” ${item.title}`;
          link.appendChild(img);
          card.appendChild(link);
          card.appendChild(meta);
          frag.appendChild(card);
        }
        grid.appendChild(frag);
      }catch(e){
        grid.innerHTML = '<p style="opacity:.7">No tiles yet. The Action will sprout some soon.</p>';
      }
    }
    load();
  </script>
</body>
</html>
